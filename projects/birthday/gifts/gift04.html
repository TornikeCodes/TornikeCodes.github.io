<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gift 4 - Photo Reveal</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<style>
body, html {
  margin:0;
  padding:0;
  height:100%;
  font-family:'Poppins', sans-serif;
  display:flex;
  justify-content:center;
  align-items:center;
  background: linear-gradient(270deg, #ffdde1, #ee9ca7, #ffe7e7, #ffc3a0);
  background-size: 800% 800%;
  animation: gradientBG 30s ease infinite;
  overflow:hidden;
}

@keyframes gradientBG {
  0% {background-position:0% 50%;}
  50% {background-position:100% 50%;}
  100% {background-position:0% 50%;}
}

.container {
  position:relative;
  width:400px;
  max-width:90vw;
  height:600px;
  max-height:90vh;
  border-radius:20px;
  overflow:hidden;
  box-shadow:0 10px 30px rgba(0,0,0,0.2);
}

#caption {
  position:absolute;
  top:10px;
  width:100%;
  text-align:center;
  font-weight:600;
  color:#4b2330;
  font-size:1.2rem;
  z-index:3;
  text-shadow: 1px 1px 4px rgba(255,255,255,0.8);
}

#scratchCanvas {
  position:absolute;
  top:0;
  left:0;
  width:100%;
  height:100%;
  z-index:2;
  cursor:crosshair;
}

#hiddenImage {
  position:absolute;
  top:0;
  left:0;
  width:100%;
  height:100%;
  object-fit:cover;
  z-index:1;
}

.heart {
  position:absolute;
  font-size:16px;
  animation:floatUp 1s ease forwards;
  pointer-events:none;
  z-index:4;
}

@keyframes floatUp {
  0% {transform:scale(1) translateY(0); opacity:1;}
  100% {transform:scale(1.5) translateY(-50px); opacity:0;}
}

.back-btn {
  position:absolute;
  bottom:10px;
  left:50%;
  transform:translateX(-50%);
  padding:8px 18px;
  background:#4b2330;
  color:white;
  border:none;
  border-radius:12px;
  font-weight:600;
  cursor:pointer;
  z-index:5;
}
</style>
</head>
<body>
<div class="container">
  <div id="caption">As your fourth gift, scratch to reveal a special memory ðŸ’–</div>
  <img id="hiddenImage" src="image.jpg" alt="Special photo"> <!-- replace with your photo -->
  <canvas id="scratchCanvas"></canvas>
  <button class="back-btn" onclick="window.location.href='../index.html'">Back to gifts</button>
</div>

<script>
const canvas = document.getElementById('scratchCanvas');
const ctx = canvas.getContext('2d');
const container = document.querySelector('.container');
canvas.width = container.clientWidth;
canvas.height = container.clientHeight;

// fill scratch layer
ctx.fillStyle = '#b0b0b0';
ctx.fillRect(0,0,canvas.width,canvas.height);

let isDrawing = false;

function getMousePos(e){
  const rect = canvas.getBoundingClientRect();
  return {
    x: e.clientX - rect.left,
    y: e.clientY - rect.top
  };
}

canvas.addEventListener('mousedown', e=>{isDrawing=true; scratch(e);});
canvas.addEventListener('mousemove', e=>{if(isDrawing)scratch(e);});
canvas.addEventListener('mouseup', e=>{isDrawing=false;});
canvas.addEventListener('mouseleave', e=>{isDrawing=false;});

canvas.addEventListener('touchstart', e=>{isDrawing=true; scratch(e.touches[0]);});
canvas.addEventListener('touchmove', e=>{if(isDrawing)scratch(e.touches[0]);});
canvas.addEventListener('touchend', e=>{isDrawing=false;});

function scratch(e){
  const pos = getMousePos(e);
  const radius = 25;
  ctx.globalCompositeOperation = 'destination-out';
  ctx.beginPath();
  ctx.arc(pos.x,pos.y,radius,0,Math.PI*2);
  ctx.fill();
  spawnHeart(pos.x,pos.y);
}

function spawnHeart(x,y){
  const heart = document.createElement('div');
  heart.classList.add('heart');
  heart.style.left = x+'px';
  heart.style.top = y+'px';
  heart.innerText='ðŸ’–';
  document.body.appendChild(heart);
  setTimeout(()=>heart.remove(),1000);
}
</script>
</body>
</html>
